<div class="posts-wrapper row">
  <div class="post">
    <div class="post-head">
      <div class="name">
        <%= @post.user.user_name %>
      </div>
    </div>
    <div class="image">
      <%= image_tag @post.image.url(:medium) %>
    </div>
    <p class="caption">
      <strong><%= @post.user.user_name %>:</strong>
      <%= @post.caption %>

      <div class="comments">
          <h4>Comments:</h4>
          <% if @post.comments %>
            <% @post.comments.each do |comment| %>
              <div class="comment">
                <div>
                  <em><%= comment.user.user_name %>:</em>
                  <%= comment.content %>
                  <%= link_to post_comment_path(@post, comment), method: :delete, data: { confirm: "Are you sure you want to delete this comment?" } do %>
                    <i class="material-icons">clear</i>
                  <% end %>
                </div>
              </div>
            <% end %>
          <% end %>
        <br>
        <div class="comment-form">
          <%= form_for [@post, @post.comments.new] do |f| %>
            <%= f.text_field :content, placeholder: 'Add a comment...', class: "text-field"%>
          <% end %>
        </div>
      </div>

    </p>
    <div class="text-center">
      <% if @post.user.id == current_user.id %>
        <%= link_to "Cancel", posts_path %> &nbsp;|&nbsp;
        <%= link_to "Edit Post", edit_post_path(@post) %> &nbsp;|&nbsp;
        <%= link_to "Delete Post", post_path(@post), method: :delete, data: { confirm: "Are you sure you want to delete this post?" } %>
      <% else %>
        <%= link_to "Go Back", posts_path %>
      <% end %>
        
    </div>
  </div>
</div>

